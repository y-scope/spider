version: "3"

vars:
  G_LIB_INSTALL_DIR: "{{.ROOT_DIR}}/tools/scripts/lib_install/"
  FMTLIB_VERSION: "11.0.2"
  SPDLOG_VERSION: "1.14.1"
  MARIADB_CONNECTOR_C_VERSION: "3.4.1"

tasks:

  lib_install:
    internal: true
    deps: ["fmtlib", "spdlog", "mariadb-connector-c", "submodules"]

  fmtlib:
    internal: true
    platforms: ["linux"]
    dir: "{{.G_LIB_INSTALL_DIR}}"
    cmds:
      - "./fmtlib.sh {{.FMTLIB_VERSION}}"

  spdlog:
    internal: true
    platforms: ["linux"]
    dir: "{{.G_LIB_INSTALL_DIR}}"
    cmds:
      - "./spdlog.sh {{.SPDLOG_VERSION}}"

  mariadb-connector-c:
    internal: true
    platforms: ["linux"]
    dir: "{{.G_LIB_INSTALL_DIR}}"
    cmds:
      - "./mariadb-connector-c.sh {{.MARIADB_CONNECTOR_C_VERSION}}"

  submodules:
    internal: true
    cmds:
      - "git submodule update --init --recursive"