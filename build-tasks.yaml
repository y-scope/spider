version: "3"

tasks:
  cpp-target:
    internal: true
    vars:
      TARGETS:
        ref: "default (list \"all\") .TARGETS"
    deps: [":config-cmake-project"]
    cmds:
      - >-
        cmake
        --build "{{.G_BUILD_SPIDER_DIR}}"
        --parallel {{numCPU}}
        --target {{range .TARGETS}}{{.}} {{end}}

  cpp-clean:
    internal: true
    deps: [":config-cmake-project"]
    cmds:
      - "cmake --build {{.G_BUILD_SPIDER_DIR}} --target clean --parallel {{numCPU}}"

  spider-py:
    cmds:
      - "uv build --directory {{.G_SRC_PYTHON_DIR}} -o {{.G_BUILD_PYTHON_DIR}}"
