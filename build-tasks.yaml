version: "3"

tasks:
  target:
    internal: true
    vars:
      TARGETS: "{{.TARGETS}}"
    requires:
      vars:
        - name: "TARGETS"
    deps: [":config-cmake-project"]
    cmds:
      - "cmake --build {{.G_BUILD_SPIDER_DIR}} --parallel
      --target {{trimPrefix \"[\" .TARGETS | trimSuffix \"]\"}}"

  clean:
    internal: true
    deps: ["::config-cmake-project"]
    cmds:
      - "cmake --build {{.G_BUILD_SPIDER_DIR}} --target clean --parallel"
