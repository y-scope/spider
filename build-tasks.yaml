version: "3"

tasks:
  target:
    internal: true
    vars:
      TARGET: "{{default \"all\" .TARGET}}"
    requires:
      vars:
        - name: "TARGET"
          enum:
            - "all"
            - "spider_client"
            - "spider_worker"
            - "spider_task_executor"
            - "unitTest"
            - "worker_test"
    deps: [":config-cmake-project"]
    cmds:
      - "cmake --build {{.G_BUILD_SPIDER_DIR}} --target {{.TARGET}} --parallel"

  clean:
    internal: true
    deps: ["::config-cmake-project"]
    cmds:
      - "cmake --build {{.G_BUILD_SPIDER_DIR}} --target clean --parallel"
